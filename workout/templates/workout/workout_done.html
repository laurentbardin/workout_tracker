{% extends 'workout/workout_base.html' %}

{% block workout_results %}
{% regroup results by exercise.name as exercise_list %}
{% for exercise_name, results in exercise_list %}
    {% with forloop.counter as exercise_number %}
    {% for result in results %}
    <tr>
        {% ifchanged exercise_name %}
        <th scope="row" rowspan="{{ results|length }}">
            {{ exercise_number }}. {{ exercise_name }}
        </th>
        {% endifchanged %}
        <td>
            {{ result.reps|default:0 }}
        </td>
        <td>
            {% if result.exercise.weight %}
            {{ result.weight|default:0 }} kg
            {% endif %}
        </td>
    </tr>
    {% endfor %}
    {% endwith %}
{% endfor %}
{% endblock %}
